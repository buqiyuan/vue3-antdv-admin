import{u as _}from"./dynamic-table-ewKYMhCK.js";import{e as l,K as m,d as k,r as T,c as F,O as h,q as O,v as R,F as r,H as s}from"./index-Clv9zNM3.js";import{S as u}from"./ApiSelect.vue_vue_type_script_setup_true_lang-DvgRuKxQ.js";import"./dayjs.min-BYaCBWoX.js";import{w as g}from"./common-Tev1tLzZ.js";import{g as d,f as P,t as q}from"./columns-ClcS1lhg.js";import{d as E}from"./debounce-BtYDntiA.js";import{I as V}from"./index-CxEAG5-f.js";import{P as j}from"./PlusOutlined-8cnECNsV.js";import{T as U}from"./index-D0onqgqk.js";import{C as D}from"./index-Kl1M3oNd.js";import{_ as I}from"./index-DDNVrX_N.js";import"./index-C6XAppnf.js";import"./index-BJ4r8mM4.js";import"./_baseUniq-CsQ8HEXR.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./collapseMotion-BCa41I5P.js";import"./move-DRIeMv9s.js";import"./RightOutlined-CtKcSETS.js";import"./VerticalRightOutlined-DF3cgokL.js";import"./cloneDeep-s5SpPfgx.js";import"./schema-form.vue_vue_type_script_setup_true_lang-uF5z2XZj.js";import"./is-fQYYZi7x.js";import"./isNumber-s4abpS_O.js";import"./index-CsLYSjjd.js";import"./useFlexGapSupport-FJ5YreuO.js";import"./hasIn-DoY5MSeO.js";import"./QuestionCircleOutlined-B99GTLc_.js";import"./_castArrayLikeObject-BIyyQ4IM.js";import"./index-Binr3P75.js";import"./DownOutlined-DxS2-6Ij.js";import"./index-jwD5cS8J.js";import"./dateUtil-C_wTM_e-.js";import"./pick-DtFW9KKp.js";import"./FullscreenOutlined-DgQLmHrK.js";import"./index-ly56m3IY.js";import"./LeftOutlined-DkJ_dKcN.js";import"./zh_CN-CAyhejr6.js";import"./index-DXPG-Hl7.js";import"./useMergedState-CVClCPu2.js";import"./index-D-la6T6i.js";import"./EnterOutlined-Bw7wTOJA.js";import"./CheckOutlined-C_x0bhih.js";import"./CopyOutlined-DN6DmnBM.js";import"./index-6_t5xb7Y.js";import"./index-C2Yf5-vJ.js";import"./useRefs-CCU70ahe.js";import"./index-BPPLYRCV.js";import"./isMobile-BbN7I0i_.js";import"./index-CYmqXHpm.js";import"./index-DrW2oiMG.js";const N=[{title:"姓名",dataIndex:"name",sorter:!0,defaultEditable:!0,editable:({index:e})=>e>0,formItemProps:{defaultValue:"李白",rules:[{required:!0,message:"请输入姓名"}]},editFormItemProps:{extendSearchFormProps:!1,rules:[{required:!0,message:"请输入姓名"}]}},{title:"性别",dataIndex:"gender",formItemProps:{component:"Select",componentProps:({formInstance:e,formModel:t})=>({options:[{label:"男",value:1},{label:"女",value:0}],onChange(){e==null||e.updateSchema({field:"clothes",componentProps:{options:d(t.gender)}}),t.clothes=""}})},editFormItemProps:{extendSearchFormProps:!0,rules:[{required:!0,type:"number",message:"请选择性别"}],componentProps:({formInstance:e,formModel:t,tableRowKey:a})=>({onChange(){e==null||e.updateSchema({field:`${a}.clothes`,componentProps:{options:d(t.gender)}}),t.clothes=""}})},customRender:({record:e})=>["女","男"][e.gender]},{title:"衣服",dataIndex:"clothes",formItemProps:{component:"Select",componentProps:({formModel:e})=>({options:d(e.gender)})},customRender:({record:e})=>{var t;return(t=d(e.gender).find(a=>a.value===e.clothes))==null?void 0:t.label}},{title:"图片",dataIndex:"img",hideInSearch:!0,formItemProps:{component:"Upload",defaultValue:[{uid:"-1",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}],componentProps:{maxCount:1,listType:"picture-card",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76"},componentSlots:({formModel:e})=>({default:()=>{var t;return(t=e.img)!=null&&t.length?"":l("div",null,[l(j,null,null),l("div",{class:"mt-8px"},[m("Upload")])])}})},customRender:({record:e})=>l(V,{width:100,src:e.img},null)},{title:"价格",dataIndex:"price",editFormItemProps:{component:"InputNumber",rules:[{required:!0,message:"请输入价格！"}]},customRender:({record:e})=>`${e.price}元`},{title:"状态",dataIndex:"status",formItemProps:{component:"Select",componentProps:({formInstance:e,schema:t})=>({showSearch:!0,filterOption:!1,request:()=>P(),onSearch:E(async a=>{t.value.loading=!0;const p={field:t.value.field,componentProps:{options:[]}};e==null||e.updateSchema([p]);const c=await P(a).finally(()=>t.value.loading=!1);p.componentProps.options=c,e==null||e.updateSchema([p])},500),onChange(a){e.setFieldsValue({status:a})}})},editFormItemProps:{rules:[{required:!0,type:"number",message:"请选择状态"}]},customRender:({record:e})=>l(U,{color:e.status==1?"red":"default"},{default:()=>[["已售罄","热卖中"][e.status]]})}],De=k({name:"EditRowTable",__name:"index",setup(e){const[t]=_(),a=T("cell"),p=async o=>(await g(500),{...o,items:q}),c=F(()=>[...N,{title:"操作",hideInTable:a.value==="cell",width:200,dataIndex:"ACTION",actions:({record:o},i)=>{const{startEditable:n,cancelEditable:b,isEditable:S,getEditFormModel:x,validateRow:C}=i;return S(o.id)?[{label:"保存",onClick:async()=>{var v;const f=await C(o.id);h.loading({content:"保存中...",key:o.id}),x(o.id),await g(2e3),b(o.id),h.success({content:"保存成功!",key:o.id,duration:2}),Object.assign(o,{...f,img:((v=f.img[0])==null?void 0:v.thumbUrl)||o.img})}},{label:"取消",onClick:()=>{b(o.id)}}]:[{label:"编辑",onClick:()=>{n(o.id,o)}}]}}]),y=(o,i,n)=>{},w=async(o,i,n)=>{await g(2e3),Object.assign(n,i)};return(o,i)=>(R(),O("div",null,[l(s(I),{message:"可编辑行表格",type:"info","show-icon":""},{description:r(()=>i[1]||(i[1]=[m(" 可编辑行表格-可编辑行表格使用示例 ")])),_:1}),l(s(D),{title:"可编辑行表格基本使用示例",style:{"margin-top":"20px"}},{default:r(()=>[l(s(t),{size:"small",bordered:"","data-request":p,columns:c.value,"editable-type":a.value,"on-save":w,"on-cancel":y,"row-key":"id"},{toolbar:r(()=>[l(s(u),{value:a.value,"onUpdate:value":i[0]||(i[0]=n=>a.value=n)},{default:r(()=>[l(s(u).Option,{value:"single"},{default:r(()=>i[2]||(i[2]=[m(" 单行编辑 ")])),_:1,__:[2]}),l(s(u).Option,{value:"multiple"},{default:r(()=>i[3]||(i[3]=[m(" 多行编辑 ")])),_:1,__:[3]}),l(s(u).Option,{value:"cell"},{default:r(()=>i[4]||(i[4]=[m(" 可编辑单元格 ")])),_:1,__:[4]})]),_:1},8,["value"])]),_:1},8,["columns","editable-type"])]),_:1})]))}});export{De as default};
