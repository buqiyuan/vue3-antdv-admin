import{d as V,r as i,c as A,q as E,v as S,x as g,e as s,eq as b,F as r,Z as q,K as y,a_ as z,N as F,at as I,n as L}from"./index-Clv9zNM3.js";import{c as M}from"./cloneDeep-s5SpPfgx.js";import{M as U,_ as $}from"./index-BJ4r8mM4.js";import{D as P}from"./index-C6XAppnf.js";import{_ as Z}from"./index-DXPG-Hl7.js";import"./_baseUniq-CsQ8HEXR.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./collapseMotion-BCa41I5P.js";import"./move-DRIeMv9s.js";import"./RightOutlined-CtKcSETS.js";import"./debounce-BtYDntiA.js";const j={style:{"--border":1},class:"header"},G=V({name:"DeptTree",__name:"DeptTree",emits:["select","init"],setup(H,{emit:D}){const c=D,d=i(""),p=i([]),l=i([]),m=i(!0),_=i(!0),v=A(()=>f(M(p.value),d.value)),f=(t,e="")=>t.filter(n=>{var a,o;return(a=n.children)!=null&&a.length&&(n.children=f(n.children,e),n.children.length)?!0:(o=n.name)==null?void 0:o.includes(e)}),h=async()=>{_.value=!0,p.value=await I.systemDept.deptList({}).finally(()=>_.value=!1),l.value=[...l.value,...p.value.map(t=>Number(t.id))],c("init",p.value)},K=t=>{c("select",t[0])},x=(t,e=[])=>t.reduce((n,a)=>{var o;return n.push(a.id),(o=a.children)!=null&&o.length&&x(a.children,n),n},e),T=()=>{l.value=x(v.value)},k=t=>{l.value=t,m.value=!1};return h(),(t,e)=>{const n=b,a=q,o=$,N=U,w=P,B=Z,C=z;return S(),E(F,null,[g("div",j,[e[5]||(e[5]=g("div",{class:"title"},"组织架构",-1)),s(n,{value:d.value,"onUpdate:value":e[0]||(e[0]=u=>d.value=u),size:"small",placeholder:"搜索"},null,8,["value"]),s(w,null,{overlay:r(()=>[s(N,null,{default:r(()=>[s(o,{onClick:T},{default:r(()=>e[3]||(e[3]=[y(" 展开全部 ")])),_:1,__:[3]}),s(o,{onClick:e[1]||(e[1]=u=>l.value=[])},{default:r(()=>e[4]||(e[4]=[y(" 折叠全部 ")])),_:1,__:[4]})]),_:1})]),default:r(()=>[s(a,{icon:"ant-design:more-outlined",size:"20",class:"flex-shrink-0"})]),_:1})]),s(C,{spinning:_.value},{default:r(()=>[s(B,{expandedKeys:l.value,"onUpdate:expandedKeys":e[2]||(e[2]=u=>l.value=u),class:"min-h-1xl","auto-expand-parent":m.value,"tree-data":v.value,"field-names":{key:"id",title:"name"},onSelect:K,onExpand:k},null,8,["expandedKeys","auto-expand-parent","tree-data"])]),_:1},8,["spinning"])],64)}}}),oe=L(G,[["__scopeId","data-v-0129359e"]]);export{oe as default};
