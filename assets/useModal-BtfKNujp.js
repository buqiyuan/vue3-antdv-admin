import{d as b,r as v,c as M,H as r,bJ as g,w as P,cK as O,e as y,aY as j,aV as x,ac as h,$ as _,cL as V}from"./index-Clv9zNM3.js";import{_ as k}from"./index.vue_vue_type_style_index_0_lang-CFCPI4h7.js";function F(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!j(n)}const w=b({props:{content:{type:[String,Function]},closeModal:Function,open:Boolean},setup(n,{attrs:c,expose:C}){const l=v(!1),u=v({...c,...n}),s=M(()=>({...c,...n,...r(u)})),d=M(()=>{const e=r(s);return{...g(e,["onCancel","onOk","closeModal","content"]),open:e.open,confirmLoading:l.value,onCancel:a,onOk:f}}),p=e=>{u.value.open=e},i=e=>{u.value={...r(s),...e}};P(()=>u.value.open,e=>{var o;Object.is(e,!1)&&((o=n.closeModal)==null||o.call(n))});const f=async e=>{var o,t;l.value=!0;try{await((t=(o=r(s))==null?void 0:o.onOk)==null?void 0:t.call(o,e)),p(!1)}catch(m){return Promise.reject(m)}finally{l.value=!1}},a=async e=>{var o,t;await((t=(o=r(s))==null?void 0:o.onCancel)==null?void 0:t.call(o,e)),p(!1)};return C({setProps:i}),()=>{const e=r(s),{content:o}=e,t=O(o)?o():o;return y(k,r(d),F(t)?t:{default:()=>[t]})}}}),R=()=>{var f;let n;const c=v(),C=(f=x())==null?void 0:f.appContext,l=v(!1),u=async()=>{if(await h(),l.value&&c.value)return c.value;if(n)return n;const a=document.createElement("div"),e=y(w);return e.appContext=C,V(e,a),n=e.component,n.props.closeModal=d,n},s=async a=>{var o,t,m;const e=await u();Object.is(e,c.value)?(o=e==null?void 0:e.setProps)==null||o.call(e,a):(m=(t=e==null?void 0:e.exposed)==null?void 0:t.setProps)==null||m.call(t,a)},d=()=>{s({open:!1})},p=async a=>{s({...a,closeModal:d,open:!0}),await h()},i=(a,{attrs:e,slots:o})=>(l.value=!0,y(w,_({ref:c},{...e,...a}),o));return i.show=p,i.hide=d,i.setProps=s,[i,c]};export{R as u};
