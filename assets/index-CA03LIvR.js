import{b as I}from"./columns-BZnsERg0.js";import{e as n,aX as C,eh as R,aY as T,d as D,r as b,B as g,C as v,v as k,am as P,F as u,H as m,K as S,at as s}from"./index-Clv9zNM3.js";import{f as A}from"./dateUtil-C_wTM_e-.js";import{T as F}from"./index-D0onqgqk.js";import{u as N,_ as V}from"./dynamic-table-ewKYMhCK.js";import"./ApiSelect.vue_vue_type_script_setup_true_lang-DvgRuKxQ.js";import"./dayjs.min-BYaCBWoX.js";import"./index.vue_vue_type_style_index_0_lang-CFCPI4h7.js";import{u as $}from"./useFormModal-B6odna7M.js";import"./index-C6XAppnf.js";import"./index-BJ4r8mM4.js";import"./_baseUniq-CsQ8HEXR.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./collapseMotion-BCa41I5P.js";import"./move-DRIeMv9s.js";import"./RightOutlined-CtKcSETS.js";import"./VerticalRightOutlined-DF3cgokL.js";import"./cloneDeep-s5SpPfgx.js";import"./schema-form.vue_vue_type_script_setup_true_lang-uF5z2XZj.js";import"./is-fQYYZi7x.js";import"./isNumber-s4abpS_O.js";import"./index-CsLYSjjd.js";import"./useFlexGapSupport-FJ5YreuO.js";import"./hasIn-DoY5MSeO.js";import"./debounce-BtYDntiA.js";import"./QuestionCircleOutlined-B99GTLc_.js";import"./_castArrayLikeObject-BIyyQ4IM.js";import"./index-Binr3P75.js";import"./DownOutlined-DxS2-6Ij.js";import"./index-jwD5cS8J.js";import"./pick-DtFW9KKp.js";import"./FullscreenOutlined-DgQLmHrK.js";import"./index-ly56m3IY.js";import"./LeftOutlined-DkJ_dKcN.js";import"./zh_CN-CAyhejr6.js";import"./index-DXPG-Hl7.js";import"./useMergedState-CVClCPu2.js";import"./index-D-la6T6i.js";import"./EnterOutlined-Bw7wTOJA.js";import"./CheckOutlined-C_x0bhih.js";import"./CopyOutlined-DN6DmnBM.js";import"./index-6_t5xb7Y.js";import"./index-C2Yf5-vJ.js";import"./useRefs-CCU70ahe.js";import"./index-BPPLYRCV.js";import"./isMobile-BbN7I0i_.js";import"./index-CYmqXHpm.js";import"./useModal-BtfKNujp.js";function q(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!T(t)}const f="/system/dict-item/:id",L=t=>C.hasRoute(f)?n(R,{to:{name:f,params:{id:t.id}}},{default:()=>[t.code]}):t.code,M=[{title:"ID",dataIndex:"id",sorter:!0,width:60},{title:"字典名称",dataIndex:"name"},{title:"字典编码",dataIndex:"code",customRender:({record:t})=>n(L,t,null)},{title:"状态",dataIndex:"status",width:80,customRender:({record:t})=>{const r=~~t.status===1,d=r?"green":"red",o=r?"启用":"停用";return n(F,{color:d},q(o)?o:{default:()=>[o]})}},{title:"备注",dataIndex:"remark"},{title:"更新时间",dataIndex:"updatedAt",sorter:!0,width:160,customRender:({record:t})=>A(t.createdAt)}],j=[{field:"name",label:"字典名称",component:"Input",colProps:{span:8}},{field:"code",label:"字典编码",component:"Input",colProps:{span:8}}],z=[{field:"name",component:"Input",label:"字典名称",rules:[{required:!0,type:"string"}]},{field:"code",component:"Input",label:"字典编码",rules:[{required:!0,type:"string"}]},{field:"status",label:"状态",component:"RadioGroup",defaultValue:1,componentProps:{options:[{label:"启用",value:1},{label:"禁用",value:0}]}},{field:"remark",component:"InputTextArea",label:"备注",colProps:{span:24},componentProps:{autoSize:{minRows:2}}}],$t=D({name:"SystemDict",__name:"index",setup(t){const p=b({}),r=b({}),[d,o]=N({formProps:{schemas:j}}),[h]=$(),y=async e=>{const[a]=await h({modalProps:{title:`${e.id?"编辑":"新增"}字典`,width:"50%",onFinish:async i=>{e.id?await s.systemDictType.dictTypeUpdate({id:e.id},i):await s.systemDictType.dictTypeCreate(i),o==null||o.reload()}},formProps:{labelWidth:120,schemas:z}});a==null||a.setFieldsValue({...e})},w=async e=>{await s.systemDictType.dictTypeDelete({id:e.id}),o==null||o.reload()},x=[...M,{title:"操作",width:130,dataIndex:"ACTION",hideInSearch:!0,fixed:"right",actions:({record:e})=>[{label:"编辑",auth:{perm:"system:dict-type:update",effect:"disable"},onClick:()=>y(e)},{label:"删除",auth:"system:dict-type:delete",popConfirm:{title:"你确定要删除吗？",placement:"left",onConfirm:()=>w(e)}}]}],_=async(e,a)=>{const i=a.id;if(e){r.value[i]=!0;const{items:l=[]}=await s.systemDictItem.dictItemList({typeId:i}).finally(()=>r.value[i]=!1);p.value[i]=l}};return(e,a)=>{const i=g("a-button"),l=V;return k(),v(m(d),{"row-key":"id","header-title":"字典管理","data-request":m(s).systemDictType.dictTypeList,columns:x,bordered:"",size:"small",onExpand:_},P({toolbar:u(()=>[n(i,{type:"primary",disabled:!e.$auth("system:dict-type:create"),onClick:a[0]||(a[0]=c=>y({}))},{default:u(()=>a[1]||(a[1]=[S(" 新增 ")])),_:1,__:[1]},8,["disabled"])]),_:2},[e.$router.hasRoute(m(f))?{name:"expandedRowRender",fn:u(({record:c})=>[n(l,{size:"small",columns:m(I),loading:r.value[c.id],"data-source":p.value[c.id],pagination:!1},null,8,["columns","loading","data-source"])]),key:"0"}:void 0]),1032,["data-request"])}}});export{$t as default};
