import{d as b,D as C,E as k,a0 as z,r as m,B,q as I,v as F,x as u,e as a,F as o,a8 as S,H as c,Z as _,K as U,G as A,at as M,O as i,au as N,as as V,n as q}from"./index-Clv9zNM3.js";import{_ as E}from"./logo-DzsBprQM.js";import{_ as R,F as T}from"./index-CsLYSjjd.js";import"./cloneDeep-s5SpPfgx.js";import"./useFlexGapSupport-FJ5YreuO.js";import"./hasIn-DoY5MSeO.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./debounce-BtYDntiA.js";import"./QuestionCircleOutlined-B99GTLc_.js";import"./collapseMotion-BCa41I5P.js";import"./_castArrayLikeObject-BIyyQ4IM.js";const D={class:"login-box"},G=["src"],H=b({__name:"index",setup(K){const v=C(),g=k(),h=z(),d=m(!1),f=m(""),t=m({username:"admin",password:"a123456",verifyCode:"",captchaId:""}),p=async()=>{const n=await M.captcha.captchaCaptchaByImg({width:100,height:50});f.value=n.img,t.value.captchaId=n.id};p();const x=async()=>{const{username:n,password:e,verifyCode:l}=t.value;if(n.trim()==""||e.trim()=="")return i.warning("用户名或密码不能为空！");if(!l)return i.warning("请输入验证码！");i.loading("登录中...",0),d.value=!0,t.value;const[s]=await N(h.login(t.value));s?(V.error({title:()=>"提示",content:()=>s.message}),p()):(i.success("登录成功！"),setTimeout(()=>g.replace(v.query.redirect||"/"))),d.value=!1,i.destroy()};return(n,e)=>{const l=S,s=R,w=B("a-button"),y=T;return F(),I("div",D,[e[4]||(e[4]=u("div",{class:"login-logo"},[u("img",{src:E,width:"45"}),u("h1",{class:"mb-0 ml-2 text-3xl font-bold"},"Antdv Admin")],-1)),a(y,{layout:"horizontal",model:t.value,onSubmit:A(x,["prevent"])},{default:o(()=>[a(s,null,{default:o(()=>[a(l,{value:t.value.username,"onUpdate:value":e[0]||(e[0]=r=>t.value.username=r),size:"large",placeholder:"admin"},{prefix:o(()=>[a(c(_),{icon:"ant-design:user-outlined"})]),_:1},8,["value"])]),_:1}),a(s,null,{default:o(()=>[a(l,{value:t.value.password,"onUpdate:value":e[1]||(e[1]=r=>t.value.password=r),size:"large",type:"password",placeholder:"a123456",autocomplete:"new-password"},{prefix:o(()=>[a(c(_),{icon:"ant-design:lock-outlined"})]),_:1},8,["value"])]),_:1}),a(s,null,{default:o(()=>[a(l,{value:t.value.verifyCode,"onUpdate:value":e[2]||(e[2]=r=>t.value.verifyCode=r),placeholder:"验证码",maxlength:4,size:"large"},{prefix:o(()=>[a(c(_),{icon:"ant-design:safety-outlined"})]),suffix:o(()=>[u("img",{src:f.value,class:"absolute right-0 h-full cursor-pointer",onClick:p},null,8,G)]),_:1},8,["value"])]),_:1}),a(s,null,{default:o(()=>[a(w,{type:"primary","html-type":"submit",size:"large",loading:d.value,block:""},{default:o(()=>e[3]||(e[3]=[U(" 登录 ")])),_:1,__:[3]},8,["loading"])]),_:1})]),_:1},8,["model"])])}}}),ee=q(H,[["__scopeId","data-v-9bd3ff02"]]);export{ee as default};
