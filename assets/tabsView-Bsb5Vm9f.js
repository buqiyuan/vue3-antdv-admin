import{aZ as A,D as L,a1 as C,r as O,c as b,aX as l,Q as _,a3 as D,a$ as M,w as y,S as k}from"./index-Clv9zNM3.js";const F=[_,D,M],j=A("tabs-view",()=>{const o=L(),T=C(),t=O([]),P=b(()=>t.value.filter(e=>e&&!c(e)&&l.hasRoute(e.name))),i=b(()=>t.value.find(e=>e&&!c(e)&&e.fullPath===o.fullPath)),c=e=>{var s;return((s=e.meta)==null?void 0:s.hideInTabs)||F.some(a=>a===e.name)},n=e=>{const s=k(),a=l.getRoutes(),u=e.reduce((r,f)=>{var v,h,m;if(f.name&&l.hasRoute(f.name)){const p=(m=(h=(v=a.find(w=>w.name===f.name))==null?void 0:v.components)==null?void 0:h.default)==null?void 0:m.name;p&&r.push(p)}return r},[]);s.remove(u)},x=e=>({...e,matched:e.matched.map(s=>{const{meta:a,path:u,name:r}=s;return{meta:a,path:u,name:r}})}),d=e=>c(e)?!1:(t.value.some(a=>a.fullPath==e.fullPath)||t.value.push(x(e)),!0),R=e=>{const s=t.value.findIndex(a=>a.fullPath==e.fullPath);n(t.value.splice(0,s))},g=e=>{const s=t.value.findIndex(a=>a.fullPath==e.fullPath);n(t.value.splice(s+1))},E=e=>{const s=t.value.findIndex(a=>a.fullPath===e.fullPath);if(s!==-1){const a=t.value.splice(s,1);n(t.value),t.value=a}},S=e=>{const s=t.value.findIndex(u=>u.fullPath==e.fullPath),a=Object.is(i.value,t.value[s]);if(n(t.value.splice(s,1)),a){const u=t.value[Math.max(0,t.value.length-1)];l.push(u)}},I=()=>{n(t.value),t.value=[]},N=e=>{const s=l.currentRoute.value,a=t.value.find(u=>u.fullPath===s.fullPath);a&&(a.meta.title=e)};return y(()=>o.fullPath,()=>{d(o)},{immediate:!0}),window.addEventListener("beforeunload",()=>{T.layoutSetting.cacheTabs||(c(o)?t.value=[t.value[0]]:t.value=[i.value||t.value[0]],t.value=t.value.filter(Boolean))}),{tabsList:t,getTabsList:P,getCurrentTab:i,addTabs:d,closeLeftTabs:R,closeRightTabs:g,closeOtherTabs:E,closeCurrentTab:S,closeAllTabs:I,updateTabTitle:N}},{persist:{pick:["tabsList"]}});export{j as u};
